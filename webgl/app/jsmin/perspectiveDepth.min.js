function initVertexBuffers(e){var t=new Float32Array([0,2.5,-5,.4,1,.4,-2.5,-2.5,-5,.4,1,.4,2.5,-2.5,-5,1,.4,.4,0,3,-5,1,.4,.4,-3,-3,-5,1,1,.4,3,-3,-5,1,1,.4]),r=6,o=e.createBuffer();if(!o)return console.log("Failed to create the buffer object"),-1;e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW);var i=e.getAttribLocation(e.program,"a_Position"),a=e.getAttribLocation(e.program,"a_Color"),n=t.BYTES_PER_ELEMENT;return e.vertexAttribPointer(i,3,e.FLOAT,!1,6*n,0),e.enableVertexAttribArray(i),e.vertexAttribPointer(a,3,e.FLOAT,!1,6*n,3*n),e.enableVertexAttribArray(a),r}function main(){var e=document.getElementById("webgl"),t=getWebGLContext(e);if(!t)return void console.log("Failed to get the rendering context fo WebGl");var r=$("#vsh_tmpl").html(),o=$("#fsh_tmpl").html();if(!initShaders(t,r,o))return void console.log("Failed to initialize shaders");var i=initVertexBuffers(t);if(0>i)return console.log("Failed to create the buffer object"),-1;t.clearColor(0,0,0,1),t.clearColor(0,0,0,1),t.enable(t.DEPTH_TEST);var a=t.getUniformLocation(t.program,"u_ViewProjMatrix");if(!a)return void console.log("Failed to get the storage locations of u_ViewProjMatrix");var n=new Matrix4;n.setPerspective(30,e.width/e.height,1,100),n.lookAt(3.06,2.5,10,0,0,-2,0,1,0),t.uniformMatrix4fv(a,!1,n.elements),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.enable(t.POLYGON_OFFSET_FILL),t.drawArrays(t.TRIANGLES,0,i/2),t.polygonOffset(1,1),t.drawArrays(t.TRIANGLES,i/2,i/2)}$(function(){main()});