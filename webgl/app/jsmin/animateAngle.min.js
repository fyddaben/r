function initVertexBuffers(e){var t=new Float32Array([0,.5,-.5,-.5,.5,-.5]),r=3,i=e.createBuffer();if(!i)return console.log("Failed to create the buffer object"),-1;e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW);var n=e.getAttribLocation(e.program,"a_Position");return e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n),r}function main(){var e=document.getElementById("webgl"),t=getWebGLContext(e);if(!t)return void console.log("Failed to get the rendering context fo WebGl");var r=$("#vsh_tmpl").html(),i=$("#fsh_tmpl").html();if(!initShaders(t,r,i))return void console.log("Failed to initialize shaders");t.clearColor(0,0,0,1);var n=initVertexBuffers(t);if(0>n)return console.log("Failed to create the buffer object"),-1;var o=new Matrix4,a=0,l=90,f=(new Date).getTime(),u=t.getUniformLocation(t.program,"u_ModelMatrix"),c=function(){var e=(new Date).getTime(),r=e-f;f=e,a+=l*r/1e3,a%=360,o.setRotate(a,0,0,1),o.translate(.35,0,0),t.uniformMatrix4fv(u,!1,o.elements),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLES,0,n),requestAnimationFrame(c)};c()}$(function(){main()});