function initVertexBuffers(e){var t=new Float32Array([0,1,0,.4,.4,1,-.5,-1,0,.4,.4,1,.5,-1,0,1,.4,.4,0,1,-4,.4,1,.4,-.5,-1,-4,.4,1,.4,.5,-1,-4,1,.4,.4,0,1,-2,1,1,.4,-.5,-1,-2,1,1,.4,.5,-1,-2,1,.4,.4]),r=9,i=e.createBuffer();if(!i)return console.log("Failed to create the buffer object"),-1;e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW);var a=e.getAttribLocation(e.program,"a_Position"),o=e.getAttribLocation(e.program,"a_Color"),n=t.BYTES_PER_ELEMENT;return e.vertexAttribPointer(a,3,e.FLOAT,!1,6*n,0),e.enableVertexAttribArray(a),e.vertexAttribPointer(o,3,e.FLOAT,!1,6*n,3*n),e.enableVertexAttribArray(o),r}function main(){var e=document.getElementById("webgl"),t=getWebGLContext(e);if(!t)return void console.log("Failed to get the rendering context fo WebGl");var r=$("#vsh_tmpl").html(),i=$("#fsh_tmpl").html();if(!initShaders(t,r,i))return void console.log("Failed to initialize shaders");var a=initVertexBuffers(t);if(0>a)return console.log("Failed to create the buffer object"),-1;t.clearColor(0,0,0,1);var o=t.getUniformLocation(t.program,"u_ViewMatrix"),n=new Matrix4,l=new Matrix4,f=new Matrix4,s=new Matrix4;f.setTranslate(.75,0,0),n.setLookAt(0,0,5,0,0,-100,0,1,0),l.setPerspective(30,e.width/e.height,1,100),s.set(l).multiply(n).multiply(f),t.uniformMatrix4fv(o,!1,s.elements),t.enable(t.DEPTH_TEST),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.drawArrays(t.TRIANGLES,0,a),f.setTranslate(-.75,0,0),s.set(l).multiply(n).multiply(f),t.uniformMatrix4fv(o,!1,s.elements),t.drawArrays(t.TRIANGLES,0,a)}$(function(){main()});