function initVertexBuffers(e){var t=new Float32Array([-.5,.5,0,1,-.5,-.5,0,0,.5,.5,1,1,.5,-.5,1,0]),r=4,o=e.createBuffer();if(!o)return console.log("Failed to create the buffer object"),-1;e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW);var i=e.getAttribLocation(e.program,"a_Position"),a=e.getAttribLocation(e.program,"a_TexCoord"),n=t.BYTES_PER_ELEMENT;return e.vertexAttribPointer(i,2,e.FLOAT,!1,4*n,0),e.enableVertexAttribArray(i),e.vertexAttribPointer(a,2,e.FLOAT,!1,4*n,2*n),e.enableVertexAttribArray(a),r}function loadTexture(e,t,r,o,i){e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i),e.uniform1i(o,0),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_STRIP,0,t)}function initTextures(e,t){var r=e.createTexture();r||console.log("failed to create obj texture");var o=e.getUniformLocation(e.program,"u_Sampler");o||console.log("failed to get u_Sampler location");var i=new Image;return i.onload=function(){loadTexture(e,t,r,o,i)},i.src="./img/sky.jpg",!0}function main(){var e=document.getElementById("webgl"),t=getWebGLContext(e);if(!t)return void console.log("Failed to get the rendering context fo WebGl");var r=$("#vsh_tmpl").html(),o=$("#fsh_tmpl").html();if(console.log("sstt"),!initShaders(t,r,o))return void console.log("Failed to initialize shaders");t.clearColor(0,0,0,1);var i=initVertexBuffers(t);return 0>i?(console.log("Failed to create the buffer object"),-1):void(initTextures(t,i)||console.log("failed to create img texture"))}$(function(){main()});